// Copyright 2020 MaidSafe.net limited.
//
// This SAFE Network Software is licensed to you under the MIT license <LICENSE-MIT
// http://opensource.org/licenses/MIT> or the Modified BSD license <LICENSE-BSD
// https://opensource.org/licenses/BSD-3-Clause>, at your option. This file may not be copied,
// modified, or distributed except according to those terms. Please review the Licences for the
// specific language governing permissions and limitations relating to use of the SAFE Network
// Software.

"https:"!==window.location.protocol&&(window.location=window.location.toString().replace(/^http:/,"https:"));var carouselTimer=null,carouselBase=null,carouselNav=null,windowWidth=0,setCarousel=null,sliderTimer=null;window.platform=null,window.OS={"Mac OS":"osx",Windows:"win",UNIX:"unix"};var updateHeader=function(){var a=void 0!==window.pageXOffset,b="CSS1Compat"===(document.compatMode||""),c=a?window.pageYOffset:b?document.documentElement.scrollTop:document.body.scrollTop;if($("#navDropdown").removeClass("open"),c>0)return $("header").addClass("invert onScroll"),$("#site-logo").addClass("invert"),$("#alphaBtn").addClass("invert"),$("#secNav").addClass("invert"),void $("#secNavButton").addClass("invert");$("header").removeClass("onScroll"),window.invertedHeader||($("header").removeClass("invert"),$("#site-logo").removeClass("invert"),$("#secNav").removeClass("invert"),$("#alphaBtn").removeClass("invert"),$("#secNavButton").removeClass("invert"))},setActiveNav=function(){var a=$(".primary-nav .primary-nav-b"),b=a.children();b.removeClass("active");for(var c=0;c<b.length;c++){var d=$(b[c]).children("a").attr("href");if(!d)return;d=d.split("/"),d=d[d.length-1];var e=window.location.pathname.split("/");if(e=e[e.length-1],"alpha.html"===e&&$("#alphaBtn").removeClass(),d&&d===e)return $(b[c]).addClass("active")}},showMobPrimaryNav=function(){$("#navDropdown > a").on("click",function(a){a.preventDefault(),$(this).parent().toggleClass("open")}),$("#navDropdown .nav-dropdown-b > li a").on("click",function(){$("#navDropdown").parent().toggleClass("open")})},Modal={target:$("#Modal"),open:function(){this.target.show()},close:function(){this.target.hide()}},loadTeamBanner=function(){var a=$(".team-img"),b=a.width(),c=null,d=8;a.empty(),b<=1134&&b>=830&&(d=6),b<=829&&(d=5);var e={Adam:"./img/team/adam.JPG",Andrew:"./img/team/Andrew.jpg",Bartlomiej:"./img/team/Bartlomiej.JPG",Benjamin:"./img/team/Benjamin.jpg",David:"./img/team/david.jpg",Francis:"./img/team/francis-brunelle.jpg",Fraser:"./img/team/fraser.jpg",Gabriel:"./img/team/gabriel.jpg",Hunter:"./img/team/Hunter.jpg",Josh:"./img/team/Josh.jpeg",Krishna:"./img/team/krishna.jpg",Marcin:"./img/team/Marcin.jpg",Michael:"./img/team/michael.jpg",Nick:"./img/team/nick.jpg",Nikita:"./img/team/Nikita.jpg",Qi:"./img/team/qi.jpg",Shankar:"./img/team/Shankar.jpg",Sharon:"./img/team/Sharon.jpg",Shona:"./img/team/shona.JPG",Spandan:"./img/team/spandan.jpg",Srini:"./img/team/Srini.jpg",Victoria:"./img/team/Victoria.jpg",Viv:"./img/team/viv.jpg"},f=parseFloat(b/d);for(var g in e)e[g]&&(c='<div class="team-img-i"><img height="'+f+'" src="'+e[g]+'" alt="'+g+'" title="'+g+'"></div>',a.append(c))},accordian=function(){$("#accordian ul li").on("click",function(){var a=$(this);if(a.hasClass("active"))return void a.removeClass("active");$("#accordian ul li").removeClass("active"),a.addClass("active")})},typingEffect=function(){var a,b=["a secure","a free"],c=0,d=0,e="",f="",g=document.getElementById("typing");if(g){var h=function(){return d===b.length&&(d=0),0===c?(document.getElementById("typing").innerHTML="",clearTimeout(a),a=setTimeout(h,1500),void c++):(e=b[d],f=e.slice(0,++c),g.innerHTML=f,f.length===e.length?(d++,c=0,clearTimeout(a),void(a=setTimeout(h,4e3))):void(a=setTimeout(h,200)))};h()}},setDownloadLink=function(){var a={"Mac OS":"osx-platform",Windows:"win-platform",UNIX:"unix-platform"},b=$(".platform");if(b){for(var c in a)a[c]&&b.removeClass(a[c]);var d=a[$.ua.os.name]||a.UNIX;$.ua.device.type?(d+=" touch-view",$(".no-support-content").removeClass("desktop-view").addClass("touch-view"),$(".al-bg-blue").addClass("touch-view")):(d+=" desktop-view",$(".no-support-content").removeClass("touch-view").addClass("desktop-view")),b.addClass(d),b.show()}},setPlatform=function(){["console","mobile","tablet","smarttv","wearable","embedded"].indexOf($.ua.device.type)>-1||(window.platform=window.OS[$.ua.os.name]||window.OS.UNIX)},downloadLauncher=function(a){a&&a.preventDefault(),window.platform===window.OS.UNIX?window.location.assign("https://github.com/maidsafe/safe_launcher/releases/tag/0.8.0"):window.location.assign(window.platform===window.OS.Windows?"https://github.com/maidsafe/safe_launcher/releases/download/0.8.0/safe_launcher-v0.8.0-win.exe":"https://github.com/maidsafe/safe_launcher/releases/download/0.8.0/safe_launcher-v0.8.0-osx.pkg")},downloadDemoApp=function(a){a&&a.preventDefault(),window.platform===window.OS.UNIX?window.location.assign("https://github.com/maidsafe/safe_examples/releases/tag/0.6.0"):window.location.assign(window.platform===window.OS.Windows?"https://github.com/maidsafe/safe_examples/releases/download/0.6.0/safe_demo_app-v0.6.0-win.exe":"https://github.com/maidsafe/safe_examples/releases/download/0.6.0/safe_demo_app-v0.6.0-osx.pkg")};setCarousel=function(a,b){carouselBase.css("margin-left",windowWidth*a*-1);var c=carouselNav.children();c.removeClass("active"),$(c[a]).addClass("active"),b&&clearInterval(carouselTimer)};var setSliderNavActive=function(a){var b=$(".slider .slider-nav .slider-nav-b span");b.removeClass("active"),$(b[a]).addClass("active")},stopSlider=function(){clearInterval(sliderTimer)},runSlider=function(){clearInterval(sliderTimer);var a=5e3,b=$(".slider .slider-b"),c=$(window).width(),d=b.children().length,e=c*d,f=0;b.css("margin-left",0),b.width(e),b.children().width(c);var g=0;setSliderNavActive(g),sliderTimer=setInterval(function(){g===d-1&&(g=-1),g++,setSliderNavActive(g),f=g*c,b.css("margin-left",-f)},a)},navSlider=function(a){var b=$(".slider .slider-b"),c=$(window).width(),d=a*c;setSliderNavActive(a),b.css("margin-left",-d)};$(function(){typingEffect(),accordian(),showMobPrimaryNav(),setActiveNav(),loadTeamBanner(),setPlatform(),setDownloadLink(),runSlider();var a=window.location.hash.split("?");2===a.length&&"download"===a.pop()&&("#launcher"===a[0]?downloadLauncher():downloadDemoApp(),window.location.hash=a[0]),$(".slider .slider-nav .slider-nav-b span").on("click",function(a){var b=a.target.dataset.index;stopSlider(),navSlider(b-1)}),$("#Modal").on("click",function(a){a.stopPropagation(),Modal.close(),$("#IntroVideo").attr("src","about:blank")}),$(".info").on("click",function(a){a.preventDefault(),$(this).toggleClass("open")}),$(document).on("mouseup",function(a){var b=$("#navDropdown > a");b.is(a.target)||0!==b.has(a.target).length||b.parent().removeClass("open");var c=$(".info");c.is(a.target)||0!==c.has(a.target).length||c.removeClass("open")})}),$(window).on("hashchange load",function(){var a=window.location.pathname.split("/").pop();setTimeout(function(){var b=window.location.hash.split("?")[0].split("#").pop();if(b){var c=$("#"+b);"alpha.html"===a&&window.scroll(0,c.offset().top-80),"careers.html"===a&&($(".tbl-cnt").hide(),c.children(".tbl-cnt").show(),window.scroll(0,c.offset().top-80))}},10)}),$(window).resize(function(){loadTeamBanner(),setPlatform(),setDownloadLink(),runSlider()}),$(window).scroll(updateHeader);
